define(["jquery","core/custom_interaction_events","core/log","core/pubsub"],function(a,b,c,d){var e={wrapper:"md-sticky-wrapper",wrapperLTR:"sticky-ltr-cells",wrapperRTL:"sticky-rtl-cells"},f={responsiveSusses:"stk:responsive-susses",responsiveStart:"stk:responsive-start",scrolling:"stk:scrolling",initSusses:"stk:init-susses",initStart:"stk:init-start"},g=function(b){this.config=b,this.tableSticky=a(b.table),this.tableSticky.length||c.debug("Page is missing a sticky table region"),this.tableSticky.parent().hasClass(e.wrapper)||this.tableSticky.wrap('<div class="'+e.wrapper+' sticky-ltr-cells"></div>'),this.wrapperSticky=this.tableSticky.parent("."+e.wrapper),this.registerEventListeners(),d.publish(f.initStart,{stickytable:this});var g=this;this.wrapperSticky.scroll(function(){d.publish(f.scrolling,{stickytable:g})});var h;a(window).resize(function(){h&&clearTimeout(h),h=setTimeout(function(){d.publish(f.responsiveStart,{stickytable:g})},500)}),d.publish(f.initSusses,{stickytable:this})};return g.prototype.initStickyTable=function(){var b=this.config.stickies;a.each(b,function(b,c){a(c).addClass("md-sticky-"+b)})},g.prototype.handleResponsiveSticky=function(){d.publish(f.responsiveSusses,{stickytable:this})},g.prototype.registerEventListeners=function(){d.subscribe(f.responsiveStart,function(a){var b=a.stickytable;b.handleResponsiveSticky()}),d.subscribe(f.initStart,function(a){var b=a.stickytable;b.initStickyTable(),b.handleResponsiveSticky()}),d.subscribe(f.scrolling,function(a){var b=a.stickytable;b.handleSupportPositionSticky()})},g.prototype.isBrowserPositionStickySupport=function(){var a=document.createElement("a"),b=a.style;return b.cssText="position:sticky;position:-webkit-sticky;position:-ms-sticky;",b.position.indexOf("sticky")!==-1},g.prototype.handleSupportPositionSticky=function(){var b=this.config.stickies;a.each(b,function(b,c){var d=c.split(",");if(!(d.length<=1))for(var e=0;e<d.length;e++)if(!(e<1)){var f=d[e];"left"===b&&a(f).css(b,a(f).prev().outerWidth())}});var c=this,d=this.isBrowserPositionStickySupport();d||(navigator.userAgent.match(/Trident\/7\./)&&this.wrapperSticky.on("mousewheel",function(b){b.preventDefault();var c=b.originalEvent.wheelDelta,d=a(this).scrollTop();a(this).scrollTop(d-c)}),this.wrapperSticky.scroll(function(){c.tableSticky.find(" tr.sticky-header th").css("top",a(this).scrollTop()),c.tableSticky.find(" tr.sticky-header td").css("top",a(this).scrollTop());var b=c.tableSticky.prop("clientHeight")-a(this).prop("clientHeight");c.tableSticky.find(" tr.sticky-footer th").css("bottom",b-a(this).scrollTop()),c.tableSticky.find(" tr.sticky-footer td").css("bottom",b-a(this).scrollTop())}).scroll(),a(".sticky-ltr-cells").scroll(function(){c.tableSticky.find(" th.sticky-cell").css("left",a(this).scrollLeft()),c.tableSticky.find(" td.sticky-cell").css("left",a(this).scrollLeft());var b=c.tableSticky.prop("clientWidth")-a(this).prop("clientWidth");c.tableSticky.find(" th.sticky-cell-opposite").css("right",b-a(this).scrollLeft()),c.tableSticky.find(" td.sticky-cell-opposite").css("right",b-a(this).scrollLeft())}).scroll())},{init:function(a){return new g(a)},EVENTS:f}});