define(["jquery","core/custom_interaction_events"],function(a,b){var c,d={top:"",right:"",bottom:"",left:""},e={sticky:"stk:sticky",responsive:"stk:responsive",init:"stk:init"},f={wrapper:"md-sticky-wrapper",wrapperLTR:"sticky-ltr-cells",wrapperRTL:"sticky-rtl-cells"},g=function(){for(var b in d){var c=d[b].split(",");if(!(c.length<=1))for(var e=0;e<c.length;e++)if(!(e<1)){var g=c[e];"left"===b&&a(g).css(b,a(g).prev().outerWidth())}}var h=function(){var a=document.createElement("a"),b=a.style;return b.cssText="position:sticky;position:-webkit-sticky;position:-ms-sticky;",b.position.indexOf("sticky")!==-1};h();var i=function(){var b="font-size: 14px; width: 4px; height: 1px; position: absolute; top: -1000px; overflow: scroll",c=a('<div dir="rtl" style="'+b+'">ABCD</div>').appendTo("body")[0],d="reverse";return c.scrollLeft>0?d="default":(c.scrollLeft=1,0===c.scrollLeft&&(d="negative")),a(c).remove(),d};i(),h||(navigator.userAgent.match(/Trident\/7\./)&&a("."+f.wrapper).on("mousewheel",function(b){b.preventDefault();var c=b.originalEvent.wheelDelta,d=a(this).scrollTop();a(this).scrollTop(d-c)}),a("."+f.wrapper).scroll(function(){a(this).find("table tr.sticky-header th").css("top",a(this).scrollTop()),a(this).find("table tr.sticky-header td").css("top",a(this).scrollTop());var b=a(this).find("table").prop("clientHeight")-a(this).prop("clientHeight");a(this).find("table tr.sticky-footer th").css("bottom",b-a(this).scrollTop()),a(this).find("table tr.sticky-footer td").css("bottom",b-a(this).scrollTop())}).scroll(),a(".sticky-ltr-cells").scroll(function(){a(this).find("table th.sticky-cell").css("left",a(this).scrollLeft()),a(this).find("table td.sticky-cell").css("left",a(this).scrollLeft());var b=a(this).find("table").prop("clientWidth")-a(this).prop("clientWidth");a(this).find("table th.sticky-cell-opposite").css("right",b-a(this).scrollLeft()),a(this).find("table td.sticky-cell-opposite").css("right",b-a(this).scrollLeft())}).scroll()),!a(".sticky-rtl-cells").length||h&&"negative"==i||(h&&(a(".sticky-rtl-cells table th.sticky-cell").css("position","relative"),a(".sticky-rtl-cells table td.sticky-cell").css("position","relative"),a(".sticky-rtl-cells table th.sticky-cell-opposite").css("position","relative"),a(".sticky-rtl-cells table td.sticky-cell-opposite").css("position","relative"),a("."+f.wrapper).scroll(function(){a(this).find("table tr.sticky-header .sticky-cell").css("top",a(this).scrollTop()),a(this).find("table tr.sticky-header .sticky-cell-opposite").css("top",a(this).scrollTop());var b=a(this).find("table").prop("clientHeight")-a(this).prop("clientHeight");a(this).find("table tr.sticky-footer .sticky-cell").css("bottom",b-a(this).scrollTop()),a(this).find("table tr.sticky-footer .sticky-cell-opposite").css("bottom",b-a(this).scrollTop())}).scroll()),a(".sticky-rtl-cells").scroll(function(){var b=a(this).find("table").prop("clientWidth")-a(this).prop("clientWidth");switch(i){case"default":a(this).find("table th.sticky-cell").css("right",b-a(this).scrollLeft()),a(this).find("table td.sticky-cell").css("right",b-a(this).scrollLeft()),a(this).find("table th.sticky-cell-opposite").css("left",a(this).scrollLeft()),a(this).find("table td.sticky-cell-opposite").css("left",a(this).scrollLeft());break;case"negative":a(this).find("table th.sticky-cell").css("right",a(this).scrollLeft()*-1),a(this).find("table td.sticky-cell").css("right",a(this).scrollLeft()*-1),a(this).find("table th.sticky-cell-opposite").css("left",b+a(this).scrollLeft()),a(this).find("table td.sticky-cell-opposite").css("left",b+a(this).scrollLeft());break;case"reverse":a(this).find("table th.sticky-cell").css("right",a(this).scrollLeft()),a(this).find("table td.sticky-cell").css("right",a(this).scrollLeft()),a(this).find("table th.sticky-cell-opposite").css("left",b-a(this).scrollLeft()),a(this).find("table td.sticky-cell-opposite").css("left",b-a(this).scrollLeft())}}).scroll())},h=function(){if(c.parent().hasClass(f.wrapper)||0===c.length)return!1;c.wrap('<div class="'+f.wrapper+' sticky-ltr-cells"></div>');for(var b in d)a(d[b]).addClass("md-sticky-"+b);return!0},i=function(){c.parent().css("width",a("#page-content").outerWidth()-50)},j=function(){h()&&(i(),g())};return{initialise:function(h){if(c=a(h.table),0!==c.length){d=h.stickies,a(document).on(e.sticky,g),a(document).on(e.init,j),a(document).on(e.responsive,i),a(document).trigger(e.init),a(document).on(b.events.activate,function(){setTimeout(function(){a(document).trigger(e.responsive)},500)}),c.parent("."+f.wrapper).scroll(function(){a(document).trigger(e.sticky)});var k;a(window).resize(function(){k&&clearTimeout(k),k=setTimeout(function(){a(document).trigger(e.sticky),i()},500)})}},stickies:d}});