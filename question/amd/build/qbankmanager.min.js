define(["jquery","core/str","core/notification"],function(a,b,c){return{_strings:null,_buttons:null,init:function(){var d=a("#qbheadercheckbox");if(0!=d.length){var e=this;b.get_strings([{key:"selectall",component:"moodle"},{key:"deselectall",component:"moodle"}]).then(function(b){e._strings=b,d.attr({disabled:!1,checked:0!=e._getSizeChecked(),title:b[0]}),d.click(e,e._headerClick),e._buttons=a(".modulespecificbuttonscontainer input, .modulespecificbuttonscontainer select, .modulespecificbuttonscontainer link, .modulespecificbuttonscontainer link"),e._buttons.attr("disabled",0==e._getSizeChecked()),e._buttons.length>0&&a(".categoryquestionscontainer").delegate('td.checkbox input[type="checkbox"]',"change",e,e._questionClick)}).fail(c.exception)}},_headerClick:function(b){var c=b.data,d=a("#qbheadercheckbox"),e=d.is(":checked"),f=e?1:0;a("#categoryquestions tbody [type=checkbox]").prop("checked",e),c._buttons.attr("disabled",0===c._getSizeChecked()),d.attr("title",c._strings[f])},_questionClick:function(b){var c=b.data,d=a("#qbheadercheckbox"),e=c._getSizeChecked(),f=a("#categoryquestions tbody [type=checkbox]").length,g=0!=e&&e==f;d.prop("checked",g),c._buttons.attr("disabled",0===e)},_getSizeChecked:function(){return a('#categoryquestions td.checkbox input[type="checkbox"]:checked').length}}});